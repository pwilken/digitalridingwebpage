<!DOCTYPE html>
<html>
<head>
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Page Meta -->
    <title>Ein täuschender Stellvertreter namens John Proxy</title>
    <meta name="description" content="Eine Einführung zu Proxies" />

    <!-- Mobile Meta -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Brand icon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/csharp.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- Ghost outputs important style and meta data with this tag -->
        <link rel="canonical" href="https://digitalriding.de/Proxy-Introduction" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Riding the digital wave" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Ein täuschender Stellvertreter namens John Proxy" />
    <meta property="og:description" content="Eine Einführung zu Proxies" />
    <meta property="og:url" content="https://digitalriding.de/Proxy-Introduction" />
    <meta property="og:image" content="/assets/images/fingerprint.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Ein täuschender Stellvertreter namens John Proxy" />
    <meta name="twitter:description" content="Eine Einführung zu Proxies" />
    <meta name="twitter:url" content="https://digitalriding.de/Proxy-Introduction" />
    <meta name="twitter:image:src" content="/assets/images/fingerprint.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Riding the digital wave",
    "name": "Ein täuschender Stellvertreter namens John Proxy",
    "url": "https://digitalriding.de/Proxy-Introduction",
    "image": "/assets/images/fingerprint.jpg",
    "description": "Eine Einführung zu Proxies"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Riding the digital wave" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <!-- The blog navigation links -->
    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Start</a></li>
        <li class="nav-about " role="presentation"><a href="/#blogpart">Beiträge</a></li>
        <li class="nav-about " role="presentation"><a href="/sites/projects">Projekte</a></li>
        <li class="nav-about " role="presentation"><a href="/sites\about">Über uns</a></li>
        <li class="nav-about " role="presentation"><a href="/author/pierrewilken">Pierre Wilken</a></li>
        <li class="nav-about " role="presentation"><a href="/author/sgoerzen">Sergej Görzen</a></li>
        <li class="nav-about " role="presentation"><a href="/sites/impressum">Impressum</a></li>
        <li class="nav-about " role="presentation"><a href="/sites/dataprotection">Datenschutzerklärung</a></li>
<!--    <li class="nav-fables " role="presentation"><a href="/tag/fables">Fables</a></li>
        <li class="nav-speeches " role="presentation"><a href="/tag/speeches">Speeches</a></li>
        <li class="nav-fiction " role="presentation"><a href="/tag/fiction">Fiction</a></li>
        <li class="nav-author " role="presentation"><a href="/author/casper">Casper</a></li>
        <li class="nav-author " role="presentation"><a href="/author/edgar">Edgar</a></li>
        <li class="nav-author " role="presentation"><a href="/author/abraham">Abraham</a></li>
        <li class="nav-author " role="presentation"><a href="/author/martin">Martin</a></li>
        <li class="nav-author " role="presentation"><a href="/author/lewis">Lewis</a></li>
--> </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/fingerprint.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-fiction">

        <header class="post-header">
            <h1 class="post-title">Ein täuschender Stellvertreter namens John Proxy</h1>
            <section class="post-meta">
            <!-- <a href='/'></a> -->

            
                
            
                
            
                
                    <a href='/author/valentinob'>Valentino B.</a>
                
            
            <time class="post-date" datetime="2019-01-15">15 Jan 2019</time>
                <!-- [[tags prefix=" on "]] -->
                
                on
                
                    
                       <a href='/tag/Proxy'>Proxy</a>,
                    
                
                    
                       <a href='/tag/Security'>Security</a>,
                    
                
                    
                       <a href='/tag/Network'>Network</a>,
                    
                
                    
                       <a href='/tag/Kotlin'>Kotlin</a>
                    
                
                
            </section>
        </header>

        <section class="post-content">

            <p>Lieber Leser, ich weiß dass die Überschrift auf eine spannende Geschichte hindeutet, 
indem John Proxy wahrscheinlich ein unglaublich gutaussehender Hauptprotagonist wäre, der in Wahrheit ein anderes Leben führt, als vorher angenommen. 
Ich muss dich leider enttäuschen. Es geht wirklich nur um Netzwerk Proxies. 
Es lohnt sich aber weiterzulesen, denn du kannst hier einiges lernen und langweilig wird es auch nicht. Versprochen!</p>

<h2 id="einführung">Einführung</h2>
<p>Es kam sicher mal vor, dass du einen Inhalt aufrufen wolltest, der in deinem Land nicht verfügbar war. 
Um solch eine Sperre zu umgehen werden oft Proxies benutzt. Proxy ist ein englischer Begriff und bedeutet übersetzt Stellvertreter. 
Dieser Begriff wird in der Informatik noch den Design Patterns zugeordnet (Proxy Pattern).</p>

<h3 id="was-ist-ein-proxy">Was ist ein Proxy?</h3>
<p>Ein Proxy ist ein Knotenpunkt im Netzwerk, der Pakete entgegennimmt und diese dann an ein Ziel weiterleitet. 
Er gibt sich somit als Stellvertreter des ursprünglichen Senders aus.
Der Empfänger sendet die Antwort zum Proxy, der wiederum das Paket zum ursprünglichen Sender schickt.</p>

<h3 id="aufgabengebiete">Aufgabengebiete</h3>
<p>Die Aufgaben eines Proxies sind vielseitig, da man recht viel damit anstellen kann.
Hier mal eine kleine Auflistung:</p>
<ul>
  <li>Verschleierung von IP-Adressen</li>
  <li>Sperrung von bestimmten Webseiten innerhalb eines Netzwerkes</li>
  <li>Caching von Inhalten z.B. Webseite</li>
  <li>Abschottung mehrere Server durch einen Reverse Proxy</li>
</ul>

<h3 id="welche-arten-gibt-es">Welche Arten gibt es?</h3>
<p>Proxies werden oft im Zusammenhang mit dem Web gebracht, da man sie da recht häufig nutzt. 
Um da nochmal eine bessere Unterscheidung zu machen werde ich von Web-Proxy sprechen, 
wenn es sich um Proxies handelt die mit HTTP zu tun haben, da Proxy ein übergeordneter Begriff ist.</p>

<p>Im folgenden werden die verschiedenen Proxy Typen näher beschrieben.</p>
<h4 id="transparenter-proxy">Transparenter Proxy</h4>
<p>Transparente Proxies offenbaren, dass die jeweilige Anfrage von dir versendet wurde. 
Zudem erkennt man die IP-Adresse des Senders. Diese Information findet man im HTTP Header mitunter als <code class="highlighter-rouge">X-Forwarded-For</code>.</p>

<h4 id="anonymer-proxy">Anonymer Proxy</h4>
<p>Anonyme Proxies offenbaren, dass die jeweilige Anfrage von dir versendet wurde. 
Die IP-Adresse des Senders wird allerdings nicht mit angegeben.</p>

<h4 id="elite-proxy">Elite Proxy</h4>
<p>Die Königsklasse sind die Elite Proxies, denn diese geben keine Information Preis.</p>

<h4 id="socks-sockets-proxy">SOCKS (SOCKetS) Proxy</h4>
<p>Im Vergleich zu den Web-Proxies ist ein SOCKS Proxy Protokollunabhängig und kann somit für weitere Dienste genutzt werden, beispielsweise für BitTorrent.</p>

<h4 id="reverse-proxy">Reverse Proxy</h4>
<p>Durch die Abschottung der Server ist der Reverse Proxy der einzige Eintrittspunkt.
Die abgeschotteten Server sind somit nicht Internet erreichbar. 
Zudem kann man einen Reverse Proxy als Load Balancer nutzen, der die jeweiligen Anfragen auf verschiedenen Servern einer Applikation verteilt.</p>

<h3 id="wie-funktioniert-das-ganze">Wie funktioniert das ganze?</h3>
<p>Du als Client musst die IP-Adresse des Web-Proxy Server kennen.
Deine Anfragen die du über HTTP stellst, werden dann über den Proxy geleitet.<br />
Dieser Web-Proxy Server untersucht den HTTP Header und kann dadurch die angefragte Ressource identifizieren.
Er stellt nun die Anfrage an den entsprechenden Server und liefert dir die Antwort zurück.</p>

<h2 id="du-lügst-doch-netflix-erkennt-wenn-ich-einen-elite-proxy-oder-vpn-dienst-benutze11">Du lügst doch. Netflix erkennt wenn ich einen Elite Proxy oder VPN Dienst benutze!!!!11</h2>
<p>Ok du hast mich erwischt. Es war alles von Anfang an nur eine Lüge!</p>

<h3 id="accountgebunden">Accountgebunden</h3>
<p>Bei der Registrierung von deinem Account, hast du wahrscheinlich noch keinen Proxy oder VPN Dienst nutzt. 
Zudem hast du eine deutsche Kreditkarte, streamst Inhalte aber aus Amerika. Ziemlich auffällig, meinst du nicht auch?</p>

<h3 id="gleiche-ip">Gleiche IP</h3>
<p>Ein VPN Anbieter hat eine Vielzahl von Servern die kunterbunt in aller Welt verteilt sind. 
Wenn mehrere Personen diesen VPN Anbieter benutzen, kann es vorkommen, dass du die gleiche IP-Adresse mit einer Person teilst. 
Beim abgleichen der Logs ist sowas recht schnell zu erkennen.</p>

<h3 id="blacklist">Blacklist</h3>
<p>Ich meine nicht die Serie (wobei die Serie ziemlich empfehlenswert ist), 
sondern eine Ansammlung von IP-Adressen die bekannt sind und von einem VPN Dienstleister kommen.
D.h man könnte wahrscheinlich einen großen Teil anhand einer Blacklist identifizieren. 
Es gibt sogar recht viele entsprechende APIs dafür.
Ich will natürlich keine Werbung machen, allerdings will ich meine Aussage nicht so stehen lassen. 
Ich habe jetzt beispielhaft zwei rausgesucht, es gibt aber noch einige mehr.</p>
<ul>
  <li><a href="https://iphub.info/">https://iphub.info/</a></li>
  <li><a href="https://www.neutrinoapi.com/api/ip-blocklist/">https://www.neutrinoapi.com/api/ip-blocklist/</a></li>
</ul>

<h3 id="active-proxy-checking">Active Proxy checking</h3>

<p>Es gibt sicherlich noch einige Kriterien die ich wahrscheinlich vergessen habe…</p>

<h2 id="abgrenzung-zu-vpns">Abgrenzung zu VPNs</h2>
<p><em>Ein Elite Proxy kostet mich doch nichts. Wieso sollte ich ein VPN Dienst nutzen?</em>
Berechtigte Frage. Schauen wir uns beides mal im Detail an.</p>

<p>Es gibt Applikationen an denen man einstellen kann, ob man einen Proxy verwenden möchte. 
Man kann auch im Betriebssystem selber einstellen, für welches Protokoll ein Proxy genutzt werden soll.
Das ist auch schon der erste Punkt der grundlegend anders ist, denn wir reden von einer Applikation oder einem Protokoll. 
Wenn wir von einer kompletten Verschlüsselung Gebrauch machen wollen, kommen wir um ein VPN nicht drum herum.</p>

<p>Über VPN wird im besten Fall die ganze Netzwerkkommunikation geleitet und somit <strong>verschlüsselt</strong>. 
Ich habe verschlüsselt fett gedruckt, da man immer bedenken muss, dass Netzwerkpakete immer adressiert sind. 
D.h die Teilstrecke ist verschlüsselt, da man ja am Ende einen Inhalt abfragen möchten. 
Der DNS Server muss ja die DNS Anfrage interpretieren können. 
Der Weg von dir zu deinem VPN Dienstleister ist auch ersichtlich nur sind die Daten von deinem ISP nicht einsehbar.</p>

<p>Wenn man VPN benutzt, dann gibt meist eine dazugehörige Applikation (auch als Smartphone App des öfteren) vom Dienstleister, 
um weitere Einstellungen vorzunehmen. Man kann z.B. auswählen welchen Server man von welcher Nation benutzen möchte, ob man in Intervallen die Server wechselt etc.</p>

<p>VPN ist allerdings auch kein heiliger Gral, da du dir nie sicher sein kannst, ob ein Unternehmen deinen Traffic loggt oder nicht.
Glaube nicht immer was auf deren Seite steht, denn es ist letztendlich ein Unternehmen und ist auf Gewinn aus.</p>

<blockquote>
  <p>Denn wie war das nochmal? Daten sind der Rohstoff des 21. Jahrhunderts.</p>
</blockquote>

<h3 id="anonymität">Anonymität</h3>
<p>Das ist ein sehr komplexes Thema, worüber man einige Bücher schreiben könnte.
Es ist unheimlich schwierig wahre Anonymität zu erhalten, denn dafür muss man unheimlich viele Variablen in Betracht ziehen.
Man muss sein Verhalten ändern, entsprechende Programme nutzen und ständig up to date sein. 
Es kann nämlich ziemlich schnell passieren, dass man etwas preisgibt, was man versucht hat zu verschleiern.
Beispielsweise gibt es Browser Plugins die deine IP-Adresse leaken können. 
Berühmte Vertreter waren Flash und Java, finden allerdings heute zum Glück nicht mehr viel Anwendung. 
Zudem gibt es weitere Protokolle wie WebRTC, welches auch mal eben die IP-Adresse leaken kann.</p>

<p>Nahezu jeder Benutzer kann schon alleine anhand eines einzigartigen Fingerabdrucks des Browsers ermittelt werden. 
Hier teste mal selbst 
<a href="https://firstpartysimulator.net">https://firstpartysimulator.net</a></p>

<p>Falls weiteres Interesse an dem Thema besteht, würde ich einen Artikel dazu schreiben der sich nur dem Thema widmet.</p>

<h2 id="beispiele">Beispiele</h2>
<h3 id="deep-packet-inspection">Deep Packet Inspection</h3>
<p>Ein Bild von einem HTTP Header, der von einem transparenten Proxy gesendet wurde.
Der Eintrag <code class="highlighter-rouge">X-Forwarded-For</code> zeigt dies.
<img src="/assets/images/screenshots/proxy/deep-packet-inspection.png" alt="Deep Packet Inspection" /></p>

<p>Die folgenden Codebeispiele sind in der Sprache Kotlin geschrieben und sollen mal kurz demonstrieren,
wie man einen Proxy erkennt bzw. einen selber implementiert. Dependencies die ich benutzt habe sind: <code class="highlighter-rouge">Javalin</code> und <code class="highlighter-rouge">khttp</code></p>

<h3 id="auslesen-der-nutzer-ip-bei-einem-transparenten-proxy">Auslesen der Nutzer IP bei einem transparenten Proxy</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fun extractIp(request: HttpServletRequest): String {
    return request
            .getHeaders("X-Forwarded-For")
            .toList()
            .let { if (it.isEmpty()) request.remoteAddr else it.first { ip -&gt; ip != request.remoteAddr } }
}
</code></pre></div></div>

<h3 id="bestimmung-der-verwendung-bei-einem-transparenten-und-anonymen-proxy">Bestimmung der Verwendung bei einem transparenten und anonymen Proxy</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fun usingProxy(request: HttpServletRequest): Boolean {
    return request
            .getHeaders("X-Forwarded-For")
            .toList()
            .isNotEmpty()
}
</code></pre></div></div>

<h3 id="eine-sehr-triviale-implementierung-eines-transparenten-proxies-für-das-http-verb-get">Eine sehr triviale Implementierung eines transparenten Proxies für das HTTP Verb GET</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proxyServer.get("/*") { ctx -&gt;
    val request = ctx.req
    val queryString = if (request.queryString.isNullOrEmpty()) "" else "?${request.queryString}"
    val response = get("${request.requestURL}$queryString")
    response.headers.forEach {name, value -&gt; ctx.header(name, value)}
    ctx.header("X-Forwarded-For", request.remoteHost)
    ctx.result(response.text)
}
</code></pre></div></div>

<h2 id="ende">Ende</h2>
<p>Ich hoffe du hast dich nicht gelangweilt und ich konnte mein Versprechen halten. Falls ihr Themenvorschläge habt, gebt uns bitte Bescheid. :-)</p>

<p>Man sieht sich im nächsten Artikel der sich um <strong>Dependency Injection</strong> handeln wird!</p>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->
            
                
            
                
            
                
                    
                        <figure class="author-image">
                            <a class="img" href="/author/valentinob" style="background-image: url(/assets/images/valentinob.jpg)"><span class="hidden">valentinob's Picture</span></a>
                        </figure>
                    

                    <section class="author">
                        <h4><a href="/author/valentinob">Valentino B.</a></h4>

                        
                            <p> German Software-Engineer</p>
                        
                        <div class="author-meta">
                            <span class="author-location icon-location"> Deutschland</span>
                            <span class="author-link icon-link"><a href="https://ososystem.de"> ososystem</a></span>
                        </div>
                    </section>

                    <!-- /author  -->

                    <section class="share">
                        <h4>Share this post</h4>
                        <a class="icon-twitter" href="http://twitter.com/share?text=Ein täuschender Stellvertreter namens John Proxy&amp;url=https://digitalriding.deProxy-Introduction"
                            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                            <span class="hidden">Twitter</span>
                        </a>
                        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://digitalriding.deProxy-Introduction"
                            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                            <span class="hidden">Facebook</span>
                        </a>
                        <a class="icon-google-plus" href="https://plus.google.com/share?url=https://digitalriding.deProxy-Introduction"
                           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                            <span class="hidden">Google+</span>
                        </a>
                    </section>
                
            

            <!-- Add Disqus Comments -->
            

        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/screenshots/monogame/09.png)" href="/Erstes-Sprite">
            <section class="post">
                <h2>MonoGame 2D - Erstes Sprite</h2>
                <p>In diesem Artikel lernst du was Sprites sind und wie man sie in MonoGame sinnvoll...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <!-- The tiny footer at the very bottom -->
        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">digitalriding</a> &copy; 2019</section>
          <section class="poweredby">Powered by <a href="https://pierrewilken.de/">Pierre Jack Wilken</a></section>
        </footer>
    </div>
    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- jQuery needs to come before `` so that jQuery can be used in code injection -->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <!-- Ghost outputs important scripts and data with this tag -->
    <!--  -->
    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-117726176-4', 'auto');
	    ga('send', 'pageview');

     </script>
    <!-- Fitvids makes video embeds responsive and awesome -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <!-- The main JavaScript file for Casper -->
    <script type="text/javascript" src="/assets/js/index.js"></script>

</body>
</html>
